<?xml version="1.0" encoding="utf-8"?>
<Project 
  ToolsVersion="12.0" 
  xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
  InitialTargets="IdPostProps"
>

  <!--BuildInfoProps-->
  <Target Name="IdPostProps">

    <ItemGroup>
      <_BuildInfo Include="@(BuildNumberFile)">
        <Name>BuildNumber</Name>
        <Default>$(InvalidBuildNumber)</Default>
      </_BuildInfo>
      <_BuildInfo Include="@(EnlistmentRevisionFile)">
        <Name>EnlistmentRevision</Name>
        <Default>$(InvalidEnlistmentRevision)</Default>
      </_BuildInfo>
      <_BuildInfo Include="@(EnlistmentUrlFile)">
        <Name>EnlistmentUrl</Name>
        <Default />
      </_BuildInfo>
    </ItemGroup>

    <ReadLinesFromFile
      File="%(_BuildInfo.Identity)"
      Condition="Exists(%(Identity))"
    >
      <Output TaskParameter="Lines" PropertyName="%(Name)" />
    </ReadLinesFromFile>
    <CreateProperty Value="%(_BuildInfo.Default)" Condition="!Exists(%(Identity))">
      <Output TaskParameter="Value" PropertyName="%(Name)" />
    </CreateProperty>
  </Target>
  
</Project>