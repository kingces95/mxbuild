<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!--push shims onto "stack"-->
  <PropertyGroup>
    
    <!--push-->
    <NugetImportIndex>$([MSBuild]::Add('1', $(NugetImportIndex)))</NugetImportIndex>
    <NugetImportFinished Condition="$(NugetImportIndex)==$(NugetImportCount)">true</NugetImportFinished>
    <_NugetImport Condition="'$(NugetImportFinished)'!='true'">$(NugetPackageTargetsShim.Split(';')[$(NugetImportIndex)])</_NugetImport>
  </PropertyGroup>
  <Import Project="$(_NugetImport)" Condition="'$(NugetImportFinished)'!='true'"/>

  <!--pop shims off of "stack" importing nuget targets after each pop-->
  <PropertyGroup>
    
    <!--pop-->
    <NugetImportIndex>$([MSBuild]::Subtract('1', $(NugetImportIndex)))</NugetImportIndex>
    <_NugetImport>$(NugetPackageTargets.Split(';')[$(NugetImportIndex)])</_NugetImport>
  </PropertyGroup>
  <Import Project="$(_NugetImport)"/>
</Project>